<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Studying for OCP - Oracle Certifed Professional - Part 2 | Senthilkumar Gopal
</title>
  <link rel="canonical" href="https://sengopal.github.io/posts/studying-for-ocp-oracle-certifed-professional-part-2.html">

    <link rel="apple-touch-icon" href="https://sengopal.github.io/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" href="https://sengopal.github.io/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://sengopal.github.io/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://sengopal.github.io/manifest.json">
    <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://sengopal.github.io/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://sengopal.github.io/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="https://sengopal.github.io/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://sengopal.github.io/theme/css/theme.css">
  <link rel="stylesheet" href="https://sengopal.github.io/extras/css/custom.css">
  <link rel="stylesheet" href="https://sengopal.github.io/extras/css/skylighting-solarized-theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://sengopal.github.io/feeds/all.atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="https://sengopal.github.io/feeds/notes.atom.xml">
<meta name="description" content="I am studying for the Oracle Certified Professional certification and following are notes which are specific to the certification, from the prep book. These notes are also helpful for a refresher on SQL syntax and usability.">
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o);
      a.async = 1;
      a.src = g;
      m = s.getElementsByTagName(o)[0];
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-67843911-1', 'auto');
    ga('send', 'pageview');
  </script>


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
  <div class="col-sm-12">
    <h1 class="title"><a href="https://sengopal.github.io/">Senthilkumar Gopal</a></h1>
      <p class="text-muted">Musings of a machine learning engineer</p>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="https://sengopal.github.io/pages/about.html">About me</a></li>
            <li class="list-inline-item"><a href="https://sengopal.github.io/pages/publications.html">Publications</a></li>
            <li class="list-inline-item"><a href="https://sengopal.github.io/pages/software.html">Software</a></li>
            <li class="list-inline-item"><a href="https://sengopal.github.io/pages/talks.html">Talks</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fas fa-rss" href="https://sengopal.github.io/feeds/all.atom.xml" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/sengopal" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-speaker-deck" href="https://speakerdeck.com/sengopal" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-medium" href="https://medium.com/@sengopal" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-twitter" href="https://twitter.com/@sengopal" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-linkedin" href="https://www.linkedin.com/in/senthilkumargopal" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>    Studying for OCP - Oracle Certifed Professional - Part 2
</h1>
      <hr>
<article class="article">
    <header>
        <ul class="list-inline">
            <li class="list-inline-item text-muted" title="2009-02-20T00:00:00-08:00">
                <i class="fas fa-clock"></i>
                Fri 20 February 2009
            </li>
            <li class="list-inline-item">
                <i class="fas fa-folder-open"></i>
                <a href="https://sengopal.github.io/category/notes.html">Notes</a>
            </li>
            <li class="list-inline-item">
                <i class="fas fa-tag"></i>
                <a href="https://sengopal.github.io/tag/oracle.html">#oracle</a>,                 <a href="https://sengopal.github.io/tag/certification.html">#certification</a>,                 <a href="https://sengopal.github.io/tag/coding.html">#coding</a>,                 <a href="https://sengopal.github.io/tag/development.html">#development</a>,                 <a href="https://sengopal.github.io/tag/sql.html">#sql</a>            </li>
        </ul>
    </header>
    <div class="hidden-xs hidden-sm">
        <div id="toc"><ul><li><a class="toc-href" href="#chapter-7" title="Chapter 7">Chapter 7</a></li><li><a class="toc-href" href="#chapter-8" title="Chapter 8">Chapter 8</a></li><li><a class="toc-href" href="#chapter-9" title="Chapter 9">Chapter 9</a></li><li><a class="toc-href" href="#chapter-10" title="Chapter 10">Chapter 10</a></li><li><a class="toc-href" href="#chapter-11" title="Chapter 11">Chapter 11</a></li><li><a class="toc-href" href="#chapter-11-continued" title="Chapter 11 Continued">Chapter 11 Continued</a></li><li><a class="toc-href" href="#chapter-12" title="Chapter 12">Chapter 12</a></li></ul></div>
    </div>
    <div class="content">
        <p>I am studying for the Oracle Certified Professional certification and
following are notes which are specific to the certification, from the
prep book. These notes are also helpful for a refresher on SQL syntax
and usability.</p>
<p>Continued from <a href="studying-for-ocp-oracle-certifed-professional-part-1">Part
1</a></p>
<h3 id="chapter-7">Chapter 7</h3>
<ol type="1">
<li>equijoin - A row is associated with one or more rows in another
table based on the equality of column values or expressions.</li>
<li>nonequijoin - In this case, a row is associated with one or more
rows in another table if its column values fall into a range determined
by inequality operators.</li>
<li>associate rows with other rows in the same table -&gt; hierarchical
-&gt; self-join. .. Rows with null or differing entries in common join
columns are excluded when equijoins and nonequijoins are performed. ..
An outer join is available to fetch these one-legged or orphaned rows if
necessary. .. A cross join or Cartesian product is formed when every row
from one table is joined to all rows in another -&gt; missing or
inadequate join conditions</li>
<li>When the source and target tables share identically named columns,
it is possible to perform a natural join between them without specifying
a join column. This is sometimes referred to as a pure natural join. ..
select region_name from regions natural join countries where
country_name=&lsquo;Canada&rsquo;</li>
<li><strong>JOIN&hellip;USING</strong> .. select region_name from regions join
countries using (region_id) where country_name=&lsquo;Canada&rsquo; -&gt; brackets
are a part of the syntax</li>
<li><strong>JOIN&hellip;ON</strong> -&gt; most widely used natural join format.
.. select region_name from regions join countries on
(countries.region_id=regions.region_id) where country_name=&lsquo;Canada&rsquo;
-&gt; brackets are optional</li>
<li>cross join or cartesian product .. This join creates one row of
output for every combination of source and target table rows.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a><span class="kw">select</span> <span class="fu">count</span>(<span class="op">*</span>) <span class="kw">from</span> regions <span class="kw">cross</span> <span class="kw">join</span> countries;</span></code></pre></div>
<ol start="8" type="1">
<li>[TRADITIONAL JOIN SYNTAX] A plus symbol enclosed in brackets (+) to
the left of the equal sign that indicates to Oracle that a right outer
join must be performed -&gt; (+) =</li>
<li>The join returns additional values from the table WITHOUT the (+)
symbol</li>
<li>CARTESION JOIN: <code>select * from regions,countries;</code></li>
<li>SQL:1999 Syntax</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb2-2"><a aria-hidden="true" href="#cb2-2" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb2-3"><a aria-hidden="true" href="#cb2-3" tabindex="-1"></a>    [<span class="kw">NATURAL</span> <span class="kw">JOIN</span> table2] |</span>
<span id="cb2-4"><a aria-hidden="true" href="#cb2-4" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">USING</span> (column_name)] |</span>
<span id="cb2-5"><a aria-hidden="true" href="#cb2-5" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.column_name <span class="op">=</span> table2.column_name)] |</span>
<span id="cb2-6"><a aria-hidden="true" href="#cb2-6" tabindex="-1"></a>    [<span class="kw">LEFT</span> | <span class="kw">RIGHT</span> | <span class="kw">FULL</span> <span class="kw">OUTER</span> <span class="kw">JOIN</span> table2</span>
<span id="cb2-7"><a aria-hidden="true" href="#cb2-7" tabindex="-1"></a>    <span class="kw">ON</span> (table1.column_name <span class="op">=</span> table2.column_name)] |</span>
<span id="cb2-8"><a aria-hidden="true" href="#cb2-8" tabindex="-1"></a>    [<span class="kw">CROSS</span> <span class="kw">JOIN</span> table2];</span></code></pre></div>
<ol start="12" type="1">
<li>If no joins or fewer than N-1 joins are specified in the WHERE
clause conditions, where N refers to the number of tables in the query,
then a Cartesian or cross join is performed.</li>
<li>If ambiguous column is NOT aliased, ORA-00918:column ambiguously
defined</li>
<li>If Column used in JOIN&hellip;USING is aliased, ORA-25154:column part of
USING clause cannot have qualifier</li>
<li>Qualifying column references with dot notation to indicate a
column&rsquo;s table of origin has a performance benefit. Time is saved
because Oracle is directed instantaneously to the appropriate table and
does not have to resolve the table name.</li>
<li>Natural JOIN</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb3-2"><a aria-hidden="true" href="#cb3-2" tabindex="-1"></a><span class="kw">FROM</span> table1</span>
<span id="cb3-3"><a aria-hidden="true" href="#cb3-3" tabindex="-1"></a><span class="kw">NATURAL</span> <span class="kw">JOIN</span> table2;</span></code></pre></div>
<pre><code>.. The pure natural join identifies the columns with common names in table1 and table2 and implicitly joins the tables using ALL THESE columns.
.. The columns in the SELECT clause may be qualified using dot notation unless they are one of the join columns</code></pre>
<ol start="17" type="1">
<li>If NATURAL JOIN Column Names are of incompatible data types :
ORA-01722: invalid number</li>
<li>If there are no common name columns, NATURAL JOIN Performs a
CARTESIAN PRODUCT</li>
<li>JOIN&hellip;USING .. select EMP.last_name, EMP.Department_id, JH.end_date,
job_id, employee_id from job_history JH join employees EMP using
(job_id,employee_id) .. Column used in the USING part should not be
qualified -&gt; ORA-25154: column part of USING clause cannot have
qualifier .. Column not used in the USING part should be qualified if
ambigously defined -&gt; ORA-00918: column ambiguously defined</li>
<li>The NATURAL keyword and USING (or) ON should not appear in the same
clause</li>
<li>When joining more than two tables NATURALLY, the intermin resultset
created will be joined to the Third table and if the resultset does not
have a common column with the Third table, then CARTESIAN PRODUCT
occurs</li>
<li>NON-EQUI JOINS</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a aria-hidden="true" href="#cb5-1" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb5-2"><a aria-hidden="true" href="#cb5-2" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb5-3"><a aria-hidden="true" href="#cb5-3" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.column_name <span class="op">&lt;</span> table2.column_name)]|</span>
<span id="cb5-4"><a aria-hidden="true" href="#cb5-4" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.column_name <span class="op">&gt;</span> table2.column_name)]|</span>
<span id="cb5-5"><a aria-hidden="true" href="#cb5-5" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.column_name <span class="op">&lt;=</span> table2.column_name)]|</span>
<span id="cb5-6"><a aria-hidden="true" href="#cb5-6" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.column_name <span class="op">&gt;=</span> table2.column_name)]|</span>
<span id="cb5-7"><a aria-hidden="true" href="#cb5-7" tabindex="-1"></a>    [<span class="kw">JOIN</span> table2 <span class="kw">ON</span> (table1.<span class="kw">column</span> <span class="kw">BETWEEN</span> table2.col1 <span class="kw">AND</span> table2.col2)]|</span></code></pre></div>
<ol start="23" type="1">
<li>JOIN Condition can have boolean variables of AND, OR and NOT -&gt;
Need to evaluate to a BOOLEAN Expression</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a aria-hidden="true" href="#cb6-1" tabindex="-1"></a><span class="kw">select</span> E.JOB_ID <span class="kw">from</span> Employees e <span class="kw">join</span> jobs j <span class="kw">on</span> (e.salary<span class="op">&gt;</span><span class="dv">5000</span> <span class="kw">and</span> <span class="dv">2</span><span class="op">*</span>e.salary <span class="op">&lt;</span> j.max_salary);</span></code></pre></div>
<ol start="24" type="1">
<li>LEFT Outer Join -&gt; Rows from Source Table -&gt; Rows from the
LEFT of the JOIN condition &ldquo;X LEFT JOIN Y&rdquo; -&gt; Rows from X .. RIGHT
Outer Join -&gt; Rows from Target Table -&gt; Rows from the RIGHT of the
JOIN condition &ldquo;X LEFT JOIN Y&rdquo; -&gt; Rows from Y .. FULL Outer Join
-&gt; Both Source and Target tables</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a aria-hidden="true" href="#cb7-1" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb7-2"><a aria-hidden="true" href="#cb7-2" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb7-3"><a aria-hidden="true" href="#cb7-3" tabindex="-1"></a>    <span class="kw">LEFT</span> <span class="kw">OUTER</span> <span class="kw">JOIN</span> table2</span>
<span id="cb7-4"><a aria-hidden="true" href="#cb7-4" tabindex="-1"></a>    <span class="kw">ON</span> (table1.<span class="kw">column</span> <span class="op">=</span> table2.<span class="kw">column</span>);</span>
<span id="cb7-5"><a aria-hidden="true" href="#cb7-5" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb7-6"><a aria-hidden="true" href="#cb7-6" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb7-7"><a aria-hidden="true" href="#cb7-7" tabindex="-1"></a>    <span class="kw">RIGHT</span> <span class="kw">OUTER</span> <span class="kw">JOIN</span> table2</span>
<span id="cb7-8"><a aria-hidden="true" href="#cb7-8" tabindex="-1"></a>    <span class="kw">ON</span> (table1.<span class="kw">column</span> <span class="op">=</span> table2.<span class="kw">column</span>);</span>
<span id="cb7-9"><a aria-hidden="true" href="#cb7-9" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb7-10"><a aria-hidden="true" href="#cb7-10" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb7-11"><a aria-hidden="true" href="#cb7-11" tabindex="-1"></a>    <span class="kw">FULL</span> <span class="kw">OUTER</span> <span class="kw">JOIN</span> table2</span>
<span id="cb7-12"><a aria-hidden="true" href="#cb7-12" tabindex="-1"></a>    <span class="kw">ON</span> (table1.<span class="kw">column</span> <span class="op">=</span> table2.<span class="kw">column</span>);</span>
<span id="cb7-13"><a aria-hidden="true" href="#cb7-13" tabindex="-1"></a><span class="kw">SELECT</span> table1.<span class="kw">column</span>, table2.<span class="kw">column</span></span>
<span id="cb7-14"><a aria-hidden="true" href="#cb7-14" tabindex="-1"></a>    <span class="kw">FROM</span> table1</span>
<span id="cb7-15"><a aria-hidden="true" href="#cb7-15" tabindex="-1"></a>    <span class="kw">CROSS</span> <span class="kw">JOIN</span> table2;     <span class="op">-&gt;</span> ANSI SQL<span class="ch">:1999</span> <span class="kw">cross</span> <span class="kw">join</span> syntax</span></code></pre></div>
<ol start="25" type="1">
<li><p>SQL*Plus presents any identically named columns as headings. SQL
Developer appends an underscore and number to each shared column name
and uses it as the heading</p></li>
<li><p>JOIN ON takes multiple conditions using AND -&gt; SELECT * FROM
EMPLOYEES E JOIN DEPARTMENTS D ON E.DEPARTMENT_ID=D.DEPARTMENT_ID AND
E.MANAGER_ID=D.MANAGER_ID;</p></li>
<li><p>departments d outer join employees e -&gt; INVALID SYNTAX -&gt;
Need to specify type of OUTER join</p></li>
<li><p>CROSS JOIN cannot have a JOIN condition -&gt; Syntax
Error</p></li>
<li><p>SELECT D.DEPARTMENT_ID FROM EMPLOYEES JOIN DEPARTMENTS D USING
(DEPARTMENT_ID); Columns in USING Clause when used in SELECT should NOT
HAVE QUALIFIERS</p></li>
<li><p>SELECT * FROM LOCATIONS L RIGHT OUTER JOIN COUNTRIES C ON
(L.COUNTRY_ID=C.COUNTRY_ID) WHERE L.COUNTRY_ID is NULL</p>
<p>.. Joins both the tables and gives a combined result with the
additional records in COUNTRIES which are not used in LOCATIONs table ..
Specifying the WHERE condition removes the rows that have an ENTRY in
the LOCATIONS table .. This gives the records which are in the COUNTRIES
table without any ENTRY in the LOCATIONS table</p></li>
<li><p>IF THERE IS A OUTER JOIN, FIRST JOIN the TABLE and apply the
CONDITIONS to get the results</p></li>
</ol>
<h3 id="chapter-8">Chapter 8</h3>
<ol type="1">
<li>A scalar subquery is a query that returns exactly one value: a
single row, with a single column.</li>
<li>A subquery is a query that is nested inside a SELECT, INSERT,
UPDATE, or DELETE statement or inside another subquery</li>
<li>Subqueries can be nested to an unlimited depth in a FROM clause but
to &ldquo;only&rdquo; 255 levels in a WHERE clause. They can be used in the SELECT
list and in the FROM, WHERE, and HAVING clauses of a query.</li>
<li>Using NOT IN is fraught with problems because of the way SQL handles
NULLs. As a general rule, do not use NOT IN unless you are certain that
the result set will not include a NULL.</li>
<li>If the subquery is going to return more than one row, then the
comparison operator must be able to accept multiple values. These
operators are IN, NOT IN, ANY, and ALL. If the comparison operator is
EQUAL, GREATER THAN, or LESS THAN (which each can only accept one
value), the parent query will fail.</li>
<li>An extension of the use of subqueries as an alternative to a join is
to enable the star transformation often needed in data warehouse
applications</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a aria-hidden="true" href="#cb8-1" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb8-2"><a aria-hidden="true" href="#cb8-2" tabindex="-1"></a><span class="kw">and</span> p.product<span class="op">=</span>&rsquo;Books&rsquo;</span>
<span id="cb8-3"><a aria-hidden="true" href="#cb8-3" tabindex="-1"></a><span class="kw">and</span> b.country<span class="op">=</span>&rsquo;Germany&rsquo;</span>
<span id="cb8-4"><a aria-hidden="true" href="#cb8-4" tabindex="-1"></a><span class="kw">and</span> c.channel<span class="op">=</span>&rsquo;Internet&rsquo;;</span>
<span id="cb8-5"><a aria-hidden="true" href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a aria-hidden="true" href="#cb8-6" tabindex="-1"></a><span class="kw">TO</span></span>
<span id="cb8-7"><a aria-hidden="true" href="#cb8-7" tabindex="-1"></a><span class="kw">select</span> <span class="op">..</span>. <span class="kw">from</span> sales</span>
<span id="cb8-8"><a aria-hidden="true" href="#cb8-8" tabindex="-1"></a><span class="kw">where</span> prod_code <span class="kw">in</span> (<span class="kw">select</span> prod_code <span class="kw">from</span> products <span class="kw">where</span> product<span class="op">=</span>&rsquo;Books&rsquo;)</span>
<span id="cb8-9"><a aria-hidden="true" href="#cb8-9" tabindex="-1"></a><span class="kw">and</span> buy_code <span class="kw">in</span> (<span class="kw">select</span> buy_code <span class="kw">from</span> buyers <span class="kw">where</span> country<span class="op">=</span>&rsquo;Germany&rsquo;)</span>
<span id="cb8-10"><a aria-hidden="true" href="#cb8-10" tabindex="-1"></a><span class="kw">and</span> chan_code <span class="kw">in</span> (<span class="kw">select</span> chan_code <span class="kw">from</span> channels <span class="kw">where</span> channel<span class="op">=</span>&rsquo;Internet);</span></code></pre></div>
<ol start="7" type="1">
<li>STAR TRANSFORMATION There is an instance initialization parameter,
STAR_TRANSFORMATION_ENABLED, which (if set to true) will permit the
Oracle query optimizer to re-write code into star queries.</li>
<li>Subqueries can also be used in the FROM clause, where they are
sometimes referred to as inline views</li>
<li>select (select max(salary) from employees) * (select
max(commission_pct) from employees) / 100 from dual; .. In this usage,
the SELECT list used to project columns is being populated with the
results of the subqueries. A subquery used in this manner must be
scalar, or the parent query will fail with an error.</li>
<li>USAGE of Sub Query happens in WHERE clause, FROM clause, SELECT
clause, DML Statements</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a aria-hidden="true" href="#cb9-1" tabindex="-1"></a><span class="kw">insert</span> <span class="kw">into</span> sales_hist <span class="kw">select</span> <span class="op">*</span> <span class="kw">from</span> sales <span class="kw">where</span> <span class="dt">date</span> <span class="op">&gt;</span> <span class="fu">sysdate</span><span class="op">-</span><span class="dv">1</span>;</span>
<span id="cb9-2"><a aria-hidden="true" href="#cb9-2" tabindex="-1"></a><span class="kw">update</span> employees <span class="kw">set</span> salary <span class="op">=</span> (<span class="kw">select</span> <span class="fu">avg</span>(salary) <span class="kw">from</span> employees);</span>
<span id="cb9-3"><a aria-hidden="true" href="#cb9-3" tabindex="-1"></a><span class="kw">delete</span> <span class="kw">from</span> departments <span class="kw">where</span> department_id <span class="kw">not</span> <span class="kw">in</span> (<span class="kw">select</span> department_id <span class="kw">from</span> employees);</span></code></pre></div>
<ol start="11" type="1">
<li>A subquery can be used to select rows for insertion but not in a
VALUES clause of an INSERT statement.</li>
<li>Usage examples</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a aria-hidden="true" href="#cb10-1" tabindex="-1"></a><span class="kw">insert</span> <span class="kw">into</span> dates <span class="kw">select</span> <span class="fu">sysdate</span> <span class="kw">from</span> dual; <span class="op">-&gt;</span> CORRECT</span>
<span id="cb10-2"><a aria-hidden="true" href="#cb10-2" tabindex="-1"></a><span class="kw">insert</span> <span class="kw">into</span> dates (date_col) <span class="kw">values</span> (<span class="kw">select</span> <span class="fu">sysdate</span> fom dual); <span class="op">-&gt;</span> <span class="kw">NOT</span> CORRECT</span></code></pre></div>
<ol start="13" type="1">
<li>The single-row subquery returns one row. A special case is the
scalar subquery, which returns a single row with one column. .. The
comparison operators valid for single-row subqueries are =, &gt;, &gt;=,
&lt;, &lt;=, and &lt;&gt;. .. The comparison operators valid for
multiple-row subqueries are IN, NOT IN, ANY, and ALL.</li>
<li>Correlated subqueries can be a very inefficient construct, due to
the need for repeated execution of the subquery. Always try to find an
alternative approach.</li>
<li>Usage of ALL</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a aria-hidden="true" href="#cb11-1" tabindex="-1"></a><span class="kw">select</span> last_name <span class="kw">from</span> employees <span class="kw">where</span> salary <span class="op">&gt;</span> <span class="kw">all</span> (<span class="kw">select</span> salary <span class="kw">from</span> employees <span class="kw">where</span> department_id<span class="op">=</span><span class="dv">80</span>);</span>
<span id="cb11-2"><a aria-hidden="true" href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a aria-hidden="true" href="#cb11-3" tabindex="-1"></a><span class="op">&lt;</span> <span class="kw">ANY</span> <span class="kw">less</span> <span class="kw">than</span> <span class="kw">the</span> highest</span>
<span id="cb11-4"><a aria-hidden="true" href="#cb11-4" tabindex="-1"></a><span class="op">&gt;</span> <span class="kw">ANY</span> more <span class="kw">than</span> <span class="kw">the</span> lowest</span>
<span id="cb11-5"><a aria-hidden="true" href="#cb11-5" tabindex="-1"></a><span class="op">=</span> <span class="kw">ANY</span> equivalent <span class="kw">to</span> <span class="kw">IN</span></span>
<span id="cb11-6"><a aria-hidden="true" href="#cb11-6" tabindex="-1"></a><span class="op">&gt;</span> <span class="kw">ALL</span> more <span class="kw">than</span> <span class="kw">the</span> highest</span>
<span id="cb11-7"><a aria-hidden="true" href="#cb11-7" tabindex="-1"></a><span class="op">&lt;</span> <span class="kw">ALL</span> <span class="kw">less</span> <span class="kw">than</span> <span class="kw">the</span> lowest</span></code></pre></div>
<ol start="16" type="1">
<li>&ldquo;NOT &gt;=&rdquo; -&gt; NOT or ! cannot be used in Conjunction with other
comparison operators</li>
<li>SUB QUERIES can be used in SELECT, FROM, WHERE, GROUP BY, HAVING
CANNOT be used in ORDER BY</li>
<li>If a subquery returns NULL, then the comparison will also return
NULL, meaning that no rows will be retrieved.</li>
</ol>
<h3 id="chapter-9">Chapter 9</h3>
<ol type="1">
<li>There is a significant deviation from the ISO standard for SQL here,
in that ISO SQL uses EXCEPT where Oracle uses MINUS, but the
functionality is identical.</li>
<li>Oracle provides three set operators: UNION, INTERSECT, and MINUS.
UNION can be qualified with ALL</li>
<li>Union options .. UNION - Returns the combined rows from two queries,
sorting them and removing duplicates. .. UNION ALL - Returns the
combined rows from two queries without sorting or removing duplicates.
.. INTERSECT - Returns only the rows that occur in both queries&rsquo; result
sets, sorting them and removing duplicates. .. MINUS - Returns only the
rows in the first result set that do not appear in the second result
set, sorting them and removing duplicates.</li>
<li>Although pending enhancements to ISO SQL will give INTERSECT a
higher priority than the others, there is currently no priority of one
operator over another. .. To override this precedence, based on the
order in which the operators appear, you can use parentheses:</li>
<li>The columns in the queries that make up a compound query can have
different names, but the output result set will use the names of the
columns in the first query</li>
<li>Each query in a compound query will project its own list of selected
columns. .. These lists must have the same number of elements, be
nominated in the same sequence, and be of broadly similar data type. ..
They do not have to have the same names (or column aliases), nor do they
need to come from the same tables (or subqueries). .. If the column
names (or aliases) are different, the result set of the compound query
will have columns named as they were in the first query. .. While the
selected column lists do not have to be exactly the same data type, they
must be from the same data type group. .. DATE amd NUMBER in first query
should match with TIMESTAMP and INTEGER in second Query .. The result
set of the compound query will have columns with the higher level of
precision: in this case, they would be TIMESTAMP and NUMBER .. NO
IMPLICIT CASTING -&gt; If the second query retrieved columns of type
VARCHAR2, the compound query would throw an error even if the string
variables could be resolved to legitimate date and numeric values.</li>
<li>UNION, MINUS, and INTERSECT will always combine the results sets of
the input queries, then sort the results to remove duplicate rows. The
sorting is based on all the columns, from left to right. .. If all the
columns in two rows have the same value, then only the first row is
returned in the compound result set</li>
<li>It is possible to put a single ORDER BY clause at the end of the
compound query. It is not possible to use ORDER BY in any of the queries
that make up the whole compound query, as this would disrupt the sorting
that is necessary to remove duplicates</li>
<li>UNION ALL -&gt; the result sets of the two input queries will be
concatenated to form the result of the compound query .. Can&rsquo;t use ORDER
BY in the individual queries; it can only appear at the end of the
compound query</li>
<li>If you know that there can be no duplicates between two tables, then
always use UNION ALL. Itsaves the database from doing a lot of
sorting</li>
<li>Remember: If padded with Spaces, then it takes precedence over
alphabets [conversion of CHAR to VARCHAR2]</li>
<li>INSTERSECT between CHAR and VARCHAR2 will not be equal [Exact number
of spaces is required in VARCHAR2 field]</li>
<li>A MINUS runs both queries, sorts the results, and returns only the
rows from the first result set that do not appear in the second result
set.</li>
<li>For Mismatching number of columns, we can use TO_CHAR(NULL)</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a aria-hidden="true" href="#cb12-1" tabindex="-1"></a><span class="kw">select</span> name,tail_length,<span class="fu">to_char</span>(<span class="kw">null</span>) <span class="kw">from</span> cats</span>
<span id="cb12-2"><a aria-hidden="true" href="#cb12-2" tabindex="-1"></a><span class="kw">union</span> <span class="kw">all</span></span>
<span id="cb12-3"><a aria-hidden="true" href="#cb12-3" tabindex="-1"></a><span class="kw">select</span> name,<span class="fu">to_char</span>(<span class="kw">null</span>),wing_span <span class="kw">from</span> birds;</span></code></pre></div>
<ol start="15" type="1">
<li>Without parentheses, the set operators will be applied in the
sequence in which they are specified</li>
<li>Using an ORDER BY class in SETS throws an Error</li>
<li>There is no problem with placing an ORDER BY clause at the end of
the compound query .. However, there might be a problem with adding a
aliased column in the order by class of the THREE or more Queries .. The
Alias declaration and the usage has to in SUCCESSIVE QUERIES else it
does not work.</li>
</ol>
<h3 id="chapter-10">Chapter 10</h3>
<ol type="1">
<li>MERGE can be thought of as a shortcut for executing either an INSERT
or an UPDATE or a DELETE, depending on some condition.</li>
<li>Final List of DML Statements are: SELECT, INSERT, UPDATE, DELETE,
MERGE</li>
<li>TRUNCATE is thought as a DML but actually is a DDL</li>
<li>There are much faster techniques than INSERT for populating a table
with large numbers of rows. These are the SQL*Loader utility, which can
upload data from files produced by an external feeder system, and
Datapump, which .. Can transfer data in bulk from one Oracle database to
another, either via disk files or through a network link.</li>
<li>One UPDATE statement can change rows in only one table, but it can
change any number of rows in that table.</li>
<li>MERGE was introduced with the SQL1999 standard, implemented by
Oracle in database release 9i.</li>
<li>UPSERT - Propritory SQL implementation of MERGE</li>
<li>A MERGE passes through the source data, for each row attempting to
locate a matching row in the target. .. If no match is found, a row can
be inserted; .. If a match is found, the matching row can be updated.
The release 10g enhancement means that the target row can even be
deleted, after being matched and updated.</li>
<li>Transactions, consisting of INSERT, UPDATE, and DELETE (or even
MERGE) commands can be made permanent (with a COMMIT) or reversed (with
a ROLLBACK). .. A TRUNCATE command, like any other DDL command, is
immediately permanent: it can never be reversed.</li>
<li>TRUNCATE is a DDL and NOT A DML because it cannot be controlled by
Transactions [(though within the database, they are in fact implemented
as transactions, but developers cannot control them]</li>
<li>Whereas a deletion may take some time (possibly hours, if there are
many rows in the table) a truncation will go through instantly. It makes
no difference whether the table contains one row or billions</li>
<li>DDL commands, such as TRUNCATE, will fail if there is any DML
command active on the table. A transaction will block the DDL command
until the DML command is terminated with a COMMIT or a ROLLBACK.</li>
<li>If the user attempting to execute the statement does not have the
relevant permissions on the tables to which it refers, the database will
return an error identical to that which would be returned if the object
did not exist. As far as the user is concerned, it does not exist</li>
<li>INSERT - insert into hr.regions values (10,&lsquo;Great Britain&rsquo;); .. When
the database receives a statement using positional notation, it will
match the order of the values to the order in which the columns of the
table are defined.</li>
</ol>
<ol start="15" type="1">
<li>INSERT Performance</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb13-1"><a aria-hidden="true" href="#cb13-1" tabindex="-1"></a><span class="kw">insert</span> <span class="kw">into</span> employees (employee_id, last_name, hire_date) <span class="kw">values</span> (<span class="dv">1000</span>,<span class="st">'WATSON'</span>,<span class="st">'03-Nov-07'</span>);</span>
<span id="cb13-2"><a aria-hidden="true" href="#cb13-2" tabindex="-1"></a><span class="kw">insert</span> <span class="kw">into</span> employees (employee_id, last_name, hire_date) <span class="kw">values</span> (<span class="dv">1000</span>,<span class="fu">upper</span>(<span class="st">'Watson'</span>),<span class="fu">to_date</span>(<span class="st">'03-Nov-07'</span>,<span class="st">'dd-mon-yy'</span>));</span></code></pre></div>
<pre><code>.. SECOND is better than the First, because of UPPER casing -&gt; useful in sorting
.. to_date prevents the performance hit of implicit conversion</code></pre>
<ol start="16" type="1">
<li>Any SELECT statement, specified as a subquery, can be used as the
source of rows passed to an INSERT. This enables insertion of many rows.
.. Alternatively, using the VALUES clause will insert one row. The
values can be literals or prompted for as substitution variables.</li>
</ol>
<ol start="17" type="1">
<li>insert all</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a aria-hidden="true" href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a aria-hidden="true" href="#cb15-2" tabindex="-1"></a><span class="cf">when</span> <span class="dv">1</span><span class="op">=</span><span class="dv">1</span> <span class="cf">then</span></span>
<span id="cb15-3"><a aria-hidden="true" href="#cb15-3" tabindex="-1"></a>  <span class="kw">into</span> emp_no_name (department_id,job_id,salary,commission_pct,hire_date)</span>
<span id="cb15-4"><a aria-hidden="true" href="#cb15-4" tabindex="-1"></a>  <span class="kw">values</span> (department_id,job_id,salary,commission_pct,hire_date)</span>
<span id="cb15-5"><a aria-hidden="true" href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a aria-hidden="true" href="#cb15-6" tabindex="-1"></a><span class="cf">when</span> department_id <span class="op">&lt;&gt;</span> <span class="dv">80</span> <span class="cf">then</span></span>
<span id="cb15-7"><a aria-hidden="true" href="#cb15-7" tabindex="-1"></a>  <span class="kw">into</span> emp_non_sales (employee_id,department_id,salary,hire_date)</span>
<span id="cb15-8"><a aria-hidden="true" href="#cb15-8" tabindex="-1"></a>  <span class="kw">values</span> (employee_id,department_id,salary,hire_date)</span>
<span id="cb15-9"><a aria-hidden="true" href="#cb15-9" tabindex="-1"></a></span>
<span id="cb15-10"><a aria-hidden="true" href="#cb15-10" tabindex="-1"></a><span class="cf">when</span> department_id <span class="op">=</span> <span class="dv">80</span> <span class="cf">then</span></span>
<span id="cb15-11"><a aria-hidden="true" href="#cb15-11" tabindex="-1"></a>  <span class="kw">into</span> emp_sales (employee_id,salary,commission_pct,hire_date)</span>
<span id="cb15-12"><a aria-hidden="true" href="#cb15-12" tabindex="-1"></a>  <span class="kw">values</span> (employee_id,salary,commission_pct,hire_date)</span>
<span id="cb15-13"><a aria-hidden="true" href="#cb15-13" tabindex="-1"></a></span>
<span id="cb15-14"><a aria-hidden="true" href="#cb15-14" tabindex="-1"></a><span class="kw">select</span> employee_id,department_id,job_id,salary,commission_pct,hire_date</span>
<span id="cb15-15"><a aria-hidden="true" href="#cb15-15" tabindex="-1"></a><span class="kw">from</span> employees <span class="kw">where</span> hire_date <span class="op">&gt;</span> <span class="fu">sysdate</span> <span class="op">-</span> <span class="dv">30</span>;</span></code></pre></div>
<p>NOTE: ALL -&gt; means all the tables will be updated for matching
conditions. IF &ldquo;ALL&rdquo; is not there, only the first matching WHEN will be
filled</p>
<ol start="18" type="1">
<li><code>UPDATE table SET column=value [,column=value...] [WHERE condition];</code></li>
<li><em>UPDATE table</em></li>
</ol>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a aria-hidden="true" href="#cb16-1" tabindex="-1"></a><span class="kw">UPDATE</span> <span class="kw">table</span></span>
<span id="cb16-2"><a aria-hidden="true" href="#cb16-2" tabindex="-1"></a>    <span class="kw">SET</span> <span class="kw">column</span><span class="op">=</span>[subquery] [,<span class="kw">column</span><span class="op">=</span>subquery<span class="op">..</span>.]</span>
<span id="cb16-3"><a aria-hidden="true" href="#cb16-3" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="kw">column</span> <span class="op">=</span> (subquery)  [<span class="kw">AND</span> <span class="kw">column</span><span class="op">=</span>subquery<span class="op">..</span>.] ;</span></code></pre></div>
<ol start="20" type="1">
<li><p>There is a rigid restriction on the subqueries using update
columns in the SET clause: the subquery must return a scalar value. ..
If there were more than one it would fail with the error -&gt;
ORA-01427: single-row subquery returns more than one row. .. The
subqueries used to SET column values must be scalar subqueries. .. The
subqueries used to select the rows must also be scalar, unless they use
the IN predicate.</p></li>
<li><p>DELETE FROM table [WHERE condition];</p></li>
<li><p>TRUNCATE is a DDL (Data Definition Language) command. TRUNCATE
completely empties the table. .. There is no concept of row selection,
as there is with a DELETE. .. It operates within the data dictionary and
affects the structure of the table, not the contents of the table. ..
However, the change it makes to the structure has the side effect of
destroying all the rows in the table.</p></li>
<li><p>The data dictionary tracks how much of the space allocated to the
table has been used. This is done with the high water mark. .. The high
water mark is the last position in the last extent that has been used ..
Inserting rows into a table pushes the high water mark up. .. Deleting
them leaves the high water mark where it is; .. The space they occupied
remains assigned to the table but is freed up for inserting more
rows.</p></li>
<li><p>Truncating a table resets the high water mark. .. A truncation is
fast: virtually instantaneous, irrespective of whether the table has
many millions of rows or none.</p></li>
<li><p><code>TRUNCATE TABLE table;</code></p></li>
<li><p><em>Merge Into Query</em></p></li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a aria-hidden="true" href="#cb17-1" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">into</span> employees e <span class="kw">using</span> new_employees n</span>
<span id="cb17-2"><a aria-hidden="true" href="#cb17-2" tabindex="-1"></a>    <span class="kw">on</span> (e.employee_id <span class="op">=</span> n.employee_id)</span>
<span id="cb17-3"><a aria-hidden="true" href="#cb17-3" tabindex="-1"></a>    <span class="cf">when</span> matched <span class="cf">then</span></span>
<span id="cb17-4"><a aria-hidden="true" href="#cb17-4" tabindex="-1"></a>    <span class="kw">update</span> <span class="kw">set</span> e.salary<span class="op">=</span>n.salary</span>
<span id="cb17-5"><a aria-hidden="true" href="#cb17-5" tabindex="-1"></a>    <span class="cf">when</span> <span class="kw">not</span> matched <span class="cf">then</span></span>
<span id="cb17-6"><a aria-hidden="true" href="#cb17-6" tabindex="-1"></a>    <span class="kw">insert</span> (employee_id,last_name,salary) <span class="kw">values</span> (n.employee_id,n.last_name,n.salary);</span></code></pre></div>
<ol start="26" type="1">
<li><p>ACID test: it must guarantee atomicity, consistency, isolation,
and durability. .. Atomicity states that all parts of a transaction must
complete or none of them. .. [Two updates must happen as a single
transaction] .. Consistency states that the results of a query must be
consistent with the state of the database at the time the query started.
.. [Updates should not be allowed when querying the table] .. The
principle of consistency requires that the database ensure that changed
values are not seen by the query [ORA-1555 snapshot too old] -&gt; DB
Admin does not configure properly .. Isolation states that an incomplete
(that is, uncommitted) transaction must be invisible to the rest of the
world. .. Durability states that once a transaction completes, it must
be impossible for the database to lose it.</p></li>
<li><p>A session begins a transaction the moment it issues any INSERT,
UPDATE, or DELETE statement (but not a TRUNCATE, that is a DDL command,
not DML). .. The transaction continues through any number of further DML
commands until the session issues either a COMMIT or a ROLLBACK
statement</p></li>
<li><p>It is impossible to nest transactions. This can be done with
PL/SQL (Oracle&rsquo;s proprietary third-generation language), but not with
industry-standard SQL.</p></li>
<li><p>The explicit transaction control statements are COMMIT, ROLLBACK,
and SAVEPOINT. .. The implicit ones are: &hellip; Issuing a DDL (CREATE, ALTER,
or DROP) or DCL (GRANT or REVOKE) statement &hellip; Exiting from the user tool
(SQL*Plus or SQL Developer or anything else) &hellip; If the client session
dies &hellip; If the system crashes</p></li>
<li><p>If a user starts a transaction by issuing a DML command and then
exits from the tool he is using without explicitly issuing either a
COMMIT or a ROLLBACK, the transaction will terminate, but whether it
terminates with a COMMIT or a ROLLBACK is entirely dependent on how the
tool is written</p></li>
<li><p>If a client&rsquo;s session fails for some reason, the database will
always roll back the transaction. .. the user process can die or be
killed at the operating system level, .. the network connection to the
database server may go down, .. the machine where the client tool is
running can crash.</p></li>
<li><p>The behavior is that the session is killed, and an active
transaction is rolled back.</p></li>
<li><p>The SAVEPOINT command can be used to set markers that will stage
the action of a ROLLBACK, but the same transaction remains in progress
irrespective of the use of SAVEPOINT.</p></li>
<li><p>COMMIT;</p></li>
<li><p>ROLLBACK [TO SAVEPOINT savepoint] ;</p></li>
<li><p>A COMMIT is instantaneous, because it doesn&rsquo;t really have to do
anything. The work has already been done. .. A ROLLBACK can be very
slow: it will usually take as long (if not longer) to reverse a
transaction than it took to make the changes in the first place. ..
Rollbacks are not good for database performance.</p></li>
<li><p>SAVEPOINT is used only for ROLLBACK and does not commit the
data</p></li>
<li><p>The SAVEPOINT command is not (yet) part of the official SQL
standard, so it may be considered good practice to avoid it in
production systems. .. It can be very useful in development, though,
when you are testing the effect of DML statements and walking through a
complex transaction step by step.</p></li>
<li><p>SET AUTOCOMMIT ON -&gt; behavior in both tools so that every DML
statement commits immediately, in its own transaction.</p></li>
<li><p>SELECT FOR UPDATE -&gt; select * from regions for
update;</p></li>
<li><p>The transaction is started implicitly with the first DML
statement executed. .. Until it is committed, it can be reversed with a
ROLLBACK</p></li>
<li><p>The FOR UPDATE clause will place a lock on all the rows
retrieved. .. No changes can be made to them by any session other than
that which issued the command, and therefore the subsequent updates will
succeed .. The locks placed by a FOR UPDATE clause will be held until
the session issuing the command issues a COMMIT or ROLLBACK.</p></li>
<li><p>If an UPDATE or DELETE command has a WHERE clause that gives it a
scope of several rows, what will happen if there is an error part way
through execution? The command is one of several in a multistatement
transaction. Whatever work the command had done before hitting the error
will be rolled back, but work done already by the transaction will
remain.</p></li>
<li><p>You want to insert a row and then update it. What sequence of
steps should you follow? SIMPLEST and BEST WAY: INSERT, UPDATE,
COMMIT</p></li>
<li><p>Creating savepoints and rolling back to them leave the
transaction in progress .. COMMIT and ROLLBACK are the commands to
terminate a transaction explicitly; TRUNCATE will do it
implicitly.</p></li>
</ol>
<h3 id="chapter-11">Chapter 11</h3>
<ol type="1">
<li><p>select object_type,count(object_type) from dba_objects group by
object_type order by object_type -&gt; DBA_OBJECTS is a View</p></li>
<li><p>USER_OBJECTS -&gt; objects owned by you ALL_OBJECTS -&gt; objects
which you have been granted access</p></li>
<li><p>User SYS owns the data dictionary: a set of tables (in the SYS
schema) that define the database and its contents. .. SYS also owns
several hundred PL/SQL packages: code that is provided for the use of
database administrators and developers.</p></li>
<li><p>You update the data dictionary by running DDL commands (such as
CREATE TABLE), which provide a layer of abstraction between you and the
data dictionary itself. .. The SYSTEM schema stores various additional
objects used for administration and monitoring.</p></li>
<li><p>The user MDSYS stores the objects used by Oracle Spatial, an
option that extends the capabilities of the Oracle database to manage
geographical information.</p></li>
<li><p>The name may be from 1 to 30 characters long (with the exception
of database link names that may be up to 128 characters long). ..
Reserved words (such as SELECT) cannot be used as object names. .. All
names must begin with a letter from A to Z. .. The characters in a name
can only be letters, numbers, an underscore (_), the dollar sign ($), or
the hash symbol (#). .. Lowercase letters will be converted to
uppercase.</p></li>
<li><p>By enclosing the name within double quotes, all these rules (with
the exception of the length) can be broken, but to get to the object,
subsequently, it must always be specified with double quotes. .. Note
that the same restrictions also apply to column names</p></li>
<li><p>Tools such as SQL*Plus and SQL Developer will automatically
convert lowercase letters to uppercase unless the name is enclosed
within double quotes</p></li>
<li><p>While it is possible to use lowercase names and nonstandard
characters (even spaces), it is considered bad practice because of the
confusion it can cause.</p></li>
<li><p>Tables, views, and private synonyms -&gt; form one namespace ..
Indexes and Constraints -&gt; form one namespace .. Naming of objects
within a single namespace should be unique</p></li>
<li><p>On creation, the table will have been assigned a limited amount
of space (known as an extent) within the database.</p></li>
<li><p>Size of character sets .. VARCHAR2 - 1byte - 4KB .. NVARCHAR2 -
stored in alternative national language character set .. CHAR - Fixed
length 1 byte to 2KB</p></li>
<li><p>For ISO/ANSI compliance, you can specify a VARCHAR data type, but
any columns of this type will be automatically converted to VARCHAR2.
###= For Binary Data</p></li>
<li><p>RAW: 1 byte to 4KB</p></li>
<li><p>RAW data is not converted by Oracle Net from the database&rsquo;s
character set to the user process&rsquo;s character set on SELECT or the other
way on INSERT.</p></li>
</ol>
<p>###= For numeric data 1. NUMBER .. Precision can range from to 1 to
38, the scale can range from -84 to 127 .. If the scale is negative,
this has the effect of replacing the last digits of any number inserted
with zeros, which do not count toward the number of digits specified for
the precision. .. If the number of digits exceeds the precision, there
will be an error; .. if it is within the precision but outside the
scale, the number will be rounded (up or down) to the nearest value
within the scale</p>
<ol start="2" type="1">
<li>FLOAT -&gt; This is an ANSI data type, floating-point number with
precision of 126 binary (or 38 decimal). Oracle also provides
BINARY_FLOAT and BINARY_DOUBLE as alternatives</li>
<li>INTEGER -&gt; Equivalent to NUMBER, with scale zero.</li>
</ol>
<p>###= For date and time [Fixed Length] 1. DATE .. This is either
length zero, if the column is empty, or 7 bytes includes century, year,
month, day, hour, minute, and second - from January 1, 4712 BC to
December 31, 9999 AD. .. Using the TRUNC function on a date also has the
effect of setting the hours, minutes, and seconds to midnight 2.
TIMESTAMP .. length zero if the column is empty, or up to 11 bytes ..
Similar to DATE, but with precision of up to 9 decimal places for the
seconds, 6 places by default. .. TIMESTAMP WITH TIMEZONE The length may
be up to 13 bytes .. difference between two times by normalizing them to
UTC, even if the times are for different time zones .. TIMESTAMP WITH
LOCAL TIMEZONE The data is normalized to the database time zone on
saving. When retrieved, it is normalized to the time zone of the user
process selecting it. .. INTERVAL YEAR TO MONTH - period in years and
months between two DATEs or TIMESTAMPs .. INTERVAL DAY TO SECOND -
period in days and seconds between two DATEs or TIMESTAMPs</p>
<p>###= For Large Object Types 1. CLOB - size effectively unlimited: 4GB
multiplied by the database block size. 2. NCLOB - stored in the
alternative national language character set, one of the permitted
Unicode character sets. 3. BLOB - binary data that will not undergo
character set conversion by Oracle Net 4. BFILE - locator pointing to a
file stored on the operating system of the database server. 4GB 5. LONG
- Character data in the database character set, up to 2GB -&gt; provided
by CLOB .. LONGs should not be used in a modern database,-&gt; should be
converted to CLOB. .. There can only be one LONG column in a table 6.
LONG RAW - Binary data that will not be converted by Oracle Net. ..Any
LONG RAW columns should be converted to BLOBs.</p>
<p>###= ROWID data type 1. Value coded in base 64 that is the pointer to
the location of a row in a table. 2. Encrypted 3. Exact physical address
4. ROWID is an Oracle proprietary data type, not visible unless
specifically selected. 5. All examinees will be expected to know about
these data types: 6. VARCHAR2, CHAR, NUMBER, DATE, TIMESTAMP, INTERVAL,
RAW, LONG, LONG RAW, CLOB, BLOB, BFILE, and ROWID. 7. Detailed knowledge
will also be needed for VARCHAR2, NUMBER and DATE.</p>
<h3 id="chapter-11-continued">Chapter 11 Continued</h3>
<ol type="1">
<li>Tables can be stored in the database:</li>
<li>HEAP TABLES - A heap is variable length rows in random order</li>
<li>Advanced table structures .. Index organized tables - Store rows in
the order of an index key. .. Index clusters - Can denormalize tables in
parent-child relationships so that related rows from different table are
stored together. .. Hash clusters - Force a random distribution of rows,
which will break down any ordering based on the entry sequence. ..
Partitioned tables Store rows in separate physical structures, the
partitions, allocating rows according to the value of a column.</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a aria-hidden="true" href="#cb18-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> [<span class="kw">schema</span>.]<span class="kw">table</span> [<span class="kw">ORGANIZATION</span> <span class="kw">HEAP</span>]  <span class="op">-&gt;</span>  <span class="kw">default</span> <span class="kw">and</span> <span class="kw">is</span> industry standard SQL.</span>
<span id="cb18-2"><a aria-hidden="true" href="#cb18-2" tabindex="-1"></a>(<span class="kw">column</span> datatype [<span class="kw">DEFAULT</span> expression]</span>
<span id="cb18-3"><a aria-hidden="true" href="#cb18-3" tabindex="-1"></a>[,<span class="kw">column</span> datatype [<span class="kw">DEFAULT</span> expression]<span class="op">..</span>.);</span></code></pre></div>
<ol start="4" type="1">
<li>The DEFAULT clause can be useful, but it is of limited
functionality. You cannot use a subquery to generate the default value:
you can only specify literal values or functions.</li>
<li>CREATE TABLE [schema.]table AS subquery; -&gt; create table
employees_copy as select * from employees; .. Create a table
EMPLOYEES_COPY, which is an exact copy of the EMPLOYEES table, identical
in both definition and the rows it contains. .. Any not null and check
constraints on the columns will also be applied to the new table, but
any primary-key, unique, or foreign-key constraints will not be</li>
<li>All of these changes are DDL commands with the built-in COMMIT.
Altering Table Definitions after Creation</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb19-1"><a aria-hidden="true" href="#cb19-1" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">add</span> (job_id <span class="dt">number</span>); <span class="op">-&gt;</span> Adding a <span class="kw">column</span></span>
<span id="cb19-2"><a aria-hidden="true" href="#cb19-2" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">modify</span> (comm <span class="dt">number</span>(<span class="dv">4</span>,<span class="dv">2</span>) <span class="kw">default</span> <span class="fl">0.05</span>); <span class="op">-&gt;</span> modifying a <span class="kw">column</span></span>
<span id="cb19-3"><a aria-hidden="true" href="#cb19-3" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">drop</span> <span class="kw">column</span> comm; <span class="op">-&gt;</span> dropping a <span class="kw">column</span></span>
<span id="cb19-4"><a aria-hidden="true" href="#cb19-4" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">set</span> <span class="kw">unused</span> <span class="kw">column</span> job_id; <span class="op">-&gt;</span> Marking <span class="kw">column</span> <span class="kw">as</span> <span class="kw">unused</span></span>
<span id="cb19-5"><a aria-hidden="true" href="#cb19-5" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">rename</span> <span class="kw">column</span> hiredate <span class="kw">to</span> recruited; <span class="op">-&gt;</span> Renaming <span class="kw">the</span> <span class="kw">column</span></span>
<span id="cb19-6"><a aria-hidden="true" href="#cb19-6" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> emp <span class="kw">read</span> <span class="kw">only</span>; <span class="op">-&gt;</span> marking <span class="kw">table</span> <span class="kw">as</span> <span class="kw">read</span><span class="op">-</span><span class="kw">only</span></span></code></pre></div>
<ol start="6" type="1">
<li>Dropping a column can be a time-consuming exercise because as each
column is dropped, every row must be restructured to remove the column&rsquo;s
data.</li>
<li>The SET UNUSED command, which makes columns nonexistent as far as
SQL is concerned, is often a better alternative, followed when
convenient by <code>ALTER TABLE tablename DROP UNUSED COLUMNS;</code>
which will drop all the unused columns in one pass through the
table.</li>
<li>Marking a table as read-only will cause errors for any attempted DML
commands. But the table can still be dropped.</li>
<li>DROP TABLE [schema.]tablename ; -&gt; it includes a COMMIT. .. If
any session (even your own) has a transaction in progress that includes
a row in the table, then the DROP will fail, .. It is also impossible to
drop a table that is referred to in a foreign key constraint defined for
a another table. This table (or the constraint) must be dropped
first.</li>
<li>The constraint types</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a aria-hidden="true" href="#cb20-1" tabindex="-1"></a><span class="kw">UNIQUE</span></span>
<span id="cb20-2"><a aria-hidden="true" href="#cb20-2" tabindex="-1"></a><span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb20-3"><a aria-hidden="true" href="#cb20-3" tabindex="-1"></a><span class="kw">PRIMARY</span> <span class="kw">KEY</span></span>
<span id="cb20-4"><a aria-hidden="true" href="#cb20-4" tabindex="-1"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span></span>
<span id="cb20-5"><a aria-hidden="true" href="#cb20-5" tabindex="-1"></a><span class="kw">CHECK</span></span></code></pre></div>
<p><em>If name is not provided, Oracle generates the constraint
names</em></p>
<ol start="11" type="1">
<li>An oddity of unique constraints is that it is possible to enter a
NULL value into the key column(s); it is indeed possible to have any
number of rows with NULL values in their key column(s)</li>
<li>Unique constraints are enforced by an index. When a unique
constraint is defined, Oracle will look for an index on the key
column(s), and if one does not exist it will be created.</li>
<li>The structure of these indexes (known as B*Tree indexes) does not
include NULL values, which is why many rows with NULL are permitted:
they simply do not exist in the index.</li>
<li>selecting WHERE key_column IS NULL cannot use the index because it
doesn&rsquo;t include the NULLs and will therefore always result in a scan of
the entire table.</li>
<li>CANNOT define one not null constraint for the whole group, but
instead must define a not null constraint for each column.</li>
<li>Possible to bypass the need to specify a value by including a
DEFAULT clause on the column when creating the table</li>
<li>The relational database paradigm includes a requirement that every
table should have a primary key, a column (or combination of columns)
that can be used to distinguish every row. .. The Oracle database
deviates from the paradigm (as do some other RDBMS implementations) by
permitting tables without primary keys</li>
<li>A table can have only one primary key. Try to create a second, and
you will get an error. A table can, however, have any number of unique
constraints and not null columns,</li>
<li>A primary key constraint is a unique constraint combined with a not
null constraint.</li>
<li>Foreign Key Constraints - The columns do not have to have the same
names, but they must be of the same data type.</li>
<li>Attempting to inset a row in the child table for which there is no
matching row in the parent table will give an error. .. Similarly,
deleting a row in the parent table will give an error if there are
already rows referring to it in the child table</li>
<li>The constraint may be created as ON DELETE CASCADE. .. This means
that if a row in the parent table is deleted, Oracle will search the
child table for all the matching rows and delete them too.</li>
<li>ON DELETE SET NULL. .. If a row in the parent table is deleted,
Oracle will search the child table for all the matching rows and set the
foreign key columns to null. .. This means that the child rows will be
orphaned, but will still exist. .. If the columns in the child table
also have a not null constraint, then the deletion from the parent table
will fail.</li>
<li>It is not possible to drop or truncate the parent table in a foreign
key relationship, even if there are no rows in the child table. .. This
still applies if the ON DELETE SET NULL or ON DELETE CASCADE clauses
were used.</li>
<li>Check Constraints -&gt; The rule must be an expression which will
evaluate to TRUE or FALSE .. The rules can refer to absolute values
entered as literals or to other columns in the same row and may make use
of some functions. .. As many check constraints as you want can be
applied to one column, but it is not possible to use a subquery to
evaluate whether a value is permissible or to use functions such as
SYSDATE. .. The not null constraint is in fact implemented as a
preconfigured check constraint.</li>
<li>If you really need to make the change in a hurry, ask the database
administrator to quiesce the database: this is a process that will
freeze all user sessions. ..If you are very quick, you can make the
change then unquiesce the database before end users complain.</li>
<li>Example</li>
</ol>
<div class="sourceCode" id="cb21"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a aria-hidden="true" href="#cb21-1" tabindex="-1"></a><span class="kw">create</span> <span class="kw">table</span> dept(</span>
<span id="cb21-2"><a aria-hidden="true" href="#cb21-2" tabindex="-1"></a>deptno <span class="dt">number</span>(<span class="dv">2</span>,<span class="dv">0</span>) <span class="kw">constraint</span> dept_deptno_pk <span class="kw">primary</span> <span class="kw">key</span>    <span class="op">-&gt;</span> <span class="kw">CONSTRAINT</span> CONSTRAINT_NAME <span class="kw">PRIMARY</span> <span class="kw">KEY</span></span>
<span id="cb21-3"><a aria-hidden="true" href="#cb21-3" tabindex="-1"></a><span class="kw">constraint</span> dept_deptno_ck <span class="kw">check</span> (deptno <span class="kw">between</span> <span class="dv">10</span> <span class="kw">and</span> <span class="dv">90</span>),  <span class="op">-&gt;</span> <span class="kw">CONSTRAINT</span> CONSTRAINT_NAME <span class="kw">CHECK</span> (COLUMN_NAME <span class="kw">BETWEEN</span> <span class="dv">10</span> <span class="kw">AND</span> <span class="dv">90</span>)</span>
<span id="cb21-4"><a aria-hidden="true" href="#cb21-4" tabindex="-1"></a>dname <span class="dt">varchar2</span>(<span class="dv">20</span>) <span class="kw">constraint</span> dept_dname_nn <span class="kw">not</span> <span class="kw">null</span>);  <span class="op">-&gt;</span> <span class="kw">CONSTRAINT</span> CONSTRAINT_NAME  <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb21-5"><a aria-hidden="true" href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a aria-hidden="true" href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a aria-hidden="true" href="#cb21-7" tabindex="-1"></a><span class="kw">create</span> <span class="kw">table</span> emp(</span>
<span id="cb21-8"><a aria-hidden="true" href="#cb21-8" tabindex="-1"></a>empno <span class="dt">number</span>(<span class="dv">4</span>,<span class="dv">0</span>) <span class="kw">constraint</span> emp_empno_pk <span class="kw">primary</span> <span class="kw">key</span>,</span>
<span id="cb21-9"><a aria-hidden="true" href="#cb21-9" tabindex="-1"></a>ename <span class="dt">varchar2</span>(<span class="dv">20</span>) <span class="kw">constraint</span> emp_ename_nn <span class="kw">not</span> <span class="kw">null</span>,</span>
<span id="cb21-10"><a aria-hidden="true" href="#cb21-10" tabindex="-1"></a>mgr <span class="dt">number</span> (<span class="dv">4</span>,<span class="dv">0</span>) <span class="kw">constraint</span> emp_mgr_fk <span class="kw">references</span> emp (empno),  <span class="op">-&gt;</span> <span class="kw">CONSTRAINT</span> CONSTRAINT_NAME <span class="kw">REFERENCES</span> TABLE_NAME (COLUMN_NAME)</span>
<span id="cb21-11"><a aria-hidden="true" href="#cb21-11" tabindex="-1"></a>dob <span class="dt">date</span>,</span>
<span id="cb21-12"><a aria-hidden="true" href="#cb21-12" tabindex="-1"></a>hiredate <span class="dt">date</span>,</span>
<span id="cb21-13"><a aria-hidden="true" href="#cb21-13" tabindex="-1"></a>deptno <span class="dt">number</span>(<span class="dv">2</span>,<span class="dv">0</span>) <span class="kw">constraint</span> emp_deptno_fk <span class="kw">references</span> dept(deptno)</span>
<span id="cb21-14"><a aria-hidden="true" href="#cb21-14" tabindex="-1"></a><span class="kw">on</span> <span class="kw">delete</span> <span class="kw">set</span> <span class="kw">null</span>,</span>
<span id="cb21-15"><a aria-hidden="true" href="#cb21-15" tabindex="-1"></a>email <span class="dt">varchar2</span>(<span class="dv">30</span>) <span class="kw">constraint</span> emp_email_uk <span class="kw">unique</span>,  <span class="op">-&gt;</span> <span class="kw">CONSTRAINT</span> CONSTRAINT_NAME <span class="kw">UNIQUE</span></span>
<span id="cb21-16"><a aria-hidden="true" href="#cb21-16" tabindex="-1"></a></span>
<span id="cb21-17"><a aria-hidden="true" href="#cb21-17" tabindex="-1"></a><span class="co">/* ADDING ADDITIONAL CONSTRAINTS AT THE </span><span class="re">END</span><span class="co"> */</span></span>
<span id="cb21-18"><a aria-hidden="true" href="#cb21-18" tabindex="-1"></a></span>
<span id="cb21-19"><a aria-hidden="true" href="#cb21-19" tabindex="-1"></a><span class="kw">constraint</span> emp_hiredate_ck <span class="kw">check</span> (hiredate <span class="op">&gt;=</span> dob <span class="op">+</span> <span class="dv">365</span><span class="op">*</span><span class="dv">16</span>),</span>
<span id="cb21-20"><a aria-hidden="true" href="#cb21-20" tabindex="-1"></a><span class="kw">constraint</span> emp_email_ck</span>
<span id="cb21-21"><a aria-hidden="true" href="#cb21-21" tabindex="-1"></a><span class="kw">check</span> ((<span class="fu">instr</span>(email,<span class="st">'@'</span>) <span class="op">&gt;</span> <span class="dv">0</span>) <span class="kw">and</span> (<span class="fu">instr</span>(email,<span class="st">'.'</span>) <span class="op">&gt;</span> <span class="dv">0</span>)));</span></code></pre></div>
<ol start="28" type="1">
<li>Stored procedures, synonyms, tables, and views exist in the same
namespace.</li>
<li>A heap is a table of variable length rows in random order. a heap
table can only be one table.a heap table can (and usually will) have
indexes and a primary key.</li>
<li>BLOB, LONG, NUMBER, RAW and VARCHAR2 are variable length. CHAR is
fixed length</li>
<li>CHAR, FLOAT, and INTEGER are all internal data types, though not as
widely used as some others.</li>
<li><code>create table newtab as select * from tab;</code> .. Check and
not null constraints are not dependent on any structures other than the
table to which they apply and so can safely be copied to a new table. ..
Primary key and unique constraints WILL NOT be copied as they are
dependent on other structures</li>
<li>Unique and primary key constraints are enforced with indexes. ..
Check and not null constraints do not rely on indexes.</li>
<li>Constraint violation will force a roll back of the current statement
but nothing else even if the transaction consists of more than one
statement</li>
</ol>
<h3 id="chapter-12">Chapter 12</h3>
<ol type="1">
<li>A View looks like a table: a two-dimensional structure of rows of
columns, against which the user can run SELECT and DML statements.</li>
<li>It can join tables, perform aggregations, or do sorts; absolutely
anything that is legal in the SELECT command can be used. However, if
the view is complex, then only SELECT statements can be run against
it</li>
<li>Views share the same namespace as tables. But DML operations will
not always succeed.</li>
<li>Use of Views: .. Security. .. Simplifying user SQL. .. Preventing
error. .. Making data comprehensible. Table and column names are often
long and pretty meaningless. .. The view and its columns can be much
more obvious. .. Performance.</li>
<li>A nested loop join uses an index to get to individual rows; a hash
join reads the whole table into memory.</li>
<li>Create View syntax</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a aria-hidden="true" href="#cb22-1" tabindex="-1"></a><span class="kw">create</span> <span class="kw">view</span> dept_emp <span class="kw">as</span></span>
<span id="cb22-2"><a aria-hidden="true" href="#cb22-2" tabindex="-1"></a><span class="kw">select</span> <span class="co">/*+USE_HASH (employees departments)*/</span> department_name, last_name</span>
<span id="cb22-3"><a aria-hidden="true" href="#cb22-3" tabindex="-1"></a><span class="kw">from</span> departments <span class="kw">natural</span> <span class="kw">join</span> employees;</span></code></pre></div>
<ol start="7" type="1">
<li>A simple view draws data from one detail table, uses no functions,
and does no aggregation. -&gt; DML statements work .. A complex view can
join detail tables, use functions, and perform aggregations. -&gt; DML
Statements wont work</li>
<li>If the view does not include a column that has a NOT NULL
constraint, then an INSERT through the view cannot succeed (unless the
column has a default value). .. This can produce a disconcerting effect
because the error message will refer to a table and a column that are
not mentioned in the statement</li>
<li>Full syntax with options</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb23-1"><a aria-hidden="true" href="#cb23-1" tabindex="-1"></a><span class="kw">CREATE</span> [<span class="kw">OR</span> <span class="kw">REPLACE</span>] [<span class="kw">FORCE</span> | <span class="kw">NOFORCE</span>] <span class="kw">VIEW</span></span>
<span id="cb23-2"><a aria-hidden="true" href="#cb23-2" tabindex="-1"></a>    [<span class="kw">schema</span>.]viewname [(alias [,alias]&hellip;)]</span>
<span id="cb23-3"><a aria-hidden="true" href="#cb23-3" tabindex="-1"></a>    <span class="kw">AS</span> subquery</span>
<span id="cb23-4"><a aria-hidden="true" href="#cb23-4" tabindex="-1"></a>    [<span class="kw">WITH</span> <span class="kw">CHECK</span> <span class="kw">OPTION</span> [<span class="kw">CONSTRAINT</span> constraintname]]</span>
<span id="cb23-5"><a aria-hidden="true" href="#cb23-5" tabindex="-1"></a>    [<span class="kw">WITH</span> <span class="kw">READ</span> <span class="kw">ONLY</span> [<span class="kw">CONSTRAINT</span> constraintname]] ;</span>
<span id="cb23-6"><a aria-hidden="true" href="#cb23-6" tabindex="-1"></a>      <span class="kw">REPLACE</span> <span class="op">-&gt;</span> replacing <span class="kw">the</span> <span class="kw">view</span></span>
<span id="cb23-7"><a aria-hidden="true" href="#cb23-7" tabindex="-1"></a>      FORCR <span class="kw">or</span> <span class="kw">NOFORCE</span> <span class="op">-&gt;</span></span>
<span id="cb23-8"><a aria-hidden="true" href="#cb23-8" tabindex="-1"></a>            <span class="kw">The</span> <span class="kw">FORCE</span> keyword will <span class="kw">create</span> <span class="kw">the</span> <span class="kw">view</span> even <span class="cf">if</span> <span class="kw">the</span> detail <span class="kw">table</span>(s) <span class="kw">in</span> <span class="kw">the</span> subquery does <span class="kw">not</span> exist.</span>
<span id="cb23-9"><a aria-hidden="true" href="#cb23-9" tabindex="-1"></a>            <span class="kw">NOFORCE</span> <span class="kw">is</span> <span class="kw">the</span> <span class="kw">default</span> <span class="kw">and</span> will cause an error <span class="cf">if</span> <span class="kw">the</span> detail <span class="kw">table</span> does <span class="kw">not</span> exist.</span>
<span id="cb23-10"><a aria-hidden="true" href="#cb23-10" tabindex="-1"></a>      <span class="kw">WITH</span> <span class="kw">CHECK</span> <span class="kw">OPTION</span></span>
<span id="cb23-11"><a aria-hidden="true" href="#cb23-11" tabindex="-1"></a>            <span class="cf">If</span> <span class="kw">the</span> subquery includes a <span class="kw">WHERE</span> clause, <span class="cf">then</span> this <span class="kw">option</span> will prevent insertion <span class="kw">of</span> <span class="kw">rows</span></span>
<span id="cb23-12"><a aria-hidden="true" href="#cb23-12" tabindex="-1"></a>        that wouldn&rsquo;t be seen <span class="kw">in</span> <span class="kw">the</span> <span class="kw">view</span> <span class="kw">or</span> updates that would cause a <span class="kw">row</span> <span class="kw">to</span> disappear <span class="kw">from</span> <span class="kw">the</span> <span class="kw">view</span>.</span>
<span id="cb23-13"><a aria-hidden="true" href="#cb23-13" tabindex="-1"></a>        <span class="kw">By</span> <span class="kw">default</span>, this <span class="kw">option</span> <span class="kw">is</span> <span class="kw">not</span> enabled, which can give disconcerting results.</span>
<span id="cb23-14"><a aria-hidden="true" href="#cb23-14" tabindex="-1"></a>       <span class="kw">WITH</span> <span class="kw">READ</span> <span class="kw">ONLY</span></span>
<span id="cb23-15"><a aria-hidden="true" href="#cb23-15" tabindex="-1"></a></span>
<span id="cb23-16"><a aria-hidden="true" href="#cb23-16" tabindex="-1"></a>       <span class="kw">CONSTRAINT</span> constraintname</span>
<span id="cb23-17"><a aria-hidden="true" href="#cb23-17" tabindex="-1"></a>            name <span class="kw">the</span> <span class="kw">WITH</span> <span class="kw">CHECK</span> <span class="kw">OPTION</span> <span class="kw">and</span> <span class="kw">WITH</span> <span class="kw">READ</span> <span class="kw">ONLY</span> restrictions <span class="cf">for</span> better error messages</span></code></pre></div>
<ol start="10" type="1">
<li><p>The main use of the ALTER VIEW command is to compile the view. A
view must be compiled successfully before it can be used .. When a view
is created, Oracle will check that the detail tables and the necessary
columns on which the view is based do exist. .. If they do not, the
compilation fails and the view will not be created, unless you use the
FORCE option. .. In that case, the view will be created but will be
unusable until the tables or columns to which it refers are created and
the view is successfully compiled. .. When an invalid view is queried,
Oracle will attempt to compile it automatically. .. If the compilation
succeeds because the problem has been fixed, the user won&rsquo;t know there
was ever a problem</p>
<p><code>ALTER VIEW HR.ex_staff compile;</code></p></li>
<li><p><code>DROP VIEW [schema.]viewname ;</code></p></li>
<li><p>A synonym is an alternative name for an object. .. Use of
synonyms means that an application can function for any user,
irrespective of which schema owns the views and tables or even in which
database the tables reside.</p></li>
<li><p><code>select * from hr.employees@prod;</code> .. database link
PROD (means of accessing objects in a database other than that onto
which you are logged)</p></li>
<li><p>Public Synonym: -&gt; data independence and location transparency
<code>create public synonym emp for hr.employees@prod;</code> .. All the
user (any user!) need enter is the following:
<code>select * from emp;</code></p></li>
<li><p>As well as SELECT statements, DML statements can address synonyms
as though they were the object to which they refer.</p></li>
<li><p>Private synonyms are schema objects. Either they must be in your
own schema, or they must be qualified with the schema name.</p></li>
<li><p>Public synonyms exist independently of a schema. .. A public
synonym can be referred to by any user to whom permission has been
granted to see it without the need to qualify it with a schema name. ..
Private synonyms must be a unique name within their schema. .. Public
synonyms can have the same name as schema objects. .. When executing
statements that address objects without a schema qualifier, Oracle will
first look for the object in the local schema, and only if it cannot be
found will it look for a public synonym.</p></li>
<li><p><code>CREATE [PUBLIC] SYNONYM synonym FOR object ;</code></p></li>
<li><p>The &ldquo;public&rdquo; in &ldquo;public synonym&rdquo; means that it is not a schema
object and cannot therefore be prefixed with a schema name. It does not
mean that everyone has permissions against it.</p></li>
<li><p>A user will need to have been granted permission to create
private synonyms and further permission to create public synonyms. ..
Usually, only the database administrator can create (or drop) public
synonyms</p></li>
<li><p><code>DROP [PUBLIC] SYNONYM synonym ;</code></p></li>
<li><p>If the object to which a synonym refers (the table or view) is
dropped, the synonym continues to exist. .. Any attempt to use it will
return an error. In this respect, synonyms behave in the same way as
views. .. If the object is recreated, the synonym must be recompiled
before use</p>
<p><code>ALTER SYNONYM synonym COMPILE;</code></p></li>
<li><p>SEQUENCE .. A sequence is a structure for generating unique
integer values. Only one session can read the next value and thus force
it to increment.</p></li>
<li><p>Each selection of SEQ1.NEXTVAL generates a unique
number.</p></li>
<li><p>Sequence Create Syntax</p></li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a aria-hidden="true" href="#cb24-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">SEQUENCE</span> [<span class="kw">schema</span>.]sequencename</span>
<span id="cb24-2"><a aria-hidden="true" href="#cb24-2" tabindex="-1"></a>    [<span class="kw">INCREMENT</span> <span class="kw">BY</span> <span class="dt">number</span>]  <span class="op">-&gt;</span>  Defaults <span class="kw">to</span> <span class="op">+</span><span class="dv">1</span> but can be <span class="kw">any</span> positive <span class="dt">number</span> (<span class="kw">or</span> negative <span class="dt">number</span> <span class="cf">for</span> a descending <span class="kw">sequence</span>).</span>
<span id="cb24-3"><a aria-hidden="true" href="#cb24-3" tabindex="-1"></a>    [<span class="kw">START</span> <span class="kw">WITH</span> <span class="dt">number</span>] <span class="op">-&gt;</span> Defaults <span class="kw">to</span> <span class="dv">1</span> but can be anything.</span>
<span id="cb24-4"><a aria-hidden="true" href="#cb24-4" tabindex="-1"></a>    [<span class="kw">MAXVALUE</span> <span class="dt">number</span> | <span class="kw">NOMAXVALUE</span>]</span>
<span id="cb24-5"><a aria-hidden="true" href="#cb24-5" tabindex="-1"></a>        <span class="op">-&gt;</span> <span class="kw">The</span> highest <span class="dt">number</span> an ascending <span class="kw">sequence</span> can go <span class="kw">to</span> <span class="kw">before</span> generating an error <span class="kw">or</span> <span class="kw">returning</span> <span class="kw">to</span> its <span class="kw">START</span> <span class="kw">WITH</span> <span class="fu">value</span>.</span>
<span id="cb24-6"><a aria-hidden="true" href="#cb24-6" tabindex="-1"></a>           <span class="kw">The</span> <span class="kw">default</span> <span class="kw">is</span> <span class="kw">no</span> maximum.</span>
<span id="cb24-7"><a aria-hidden="true" href="#cb24-7" tabindex="-1"></a>    [<span class="kw">MINVALUE</span> <span class="dt">number</span> | <span class="kw">NOMINVALUE</span>]</span>
<span id="cb24-8"><a aria-hidden="true" href="#cb24-8" tabindex="-1"></a>        <span class="op">-&gt;</span> <span class="kw">The</span> lowest <span class="dt">number</span> a descending <span class="kw">sequence</span> can go <span class="kw">to</span> <span class="kw">before</span> generating an error <span class="kw">or</span> <span class="kw">returning</span> <span class="kw">to</span> its <span class="kw">START</span> <span class="kw">WITH</span> <span class="fu">value</span>.</span>
<span id="cb24-9"><a aria-hidden="true" href="#cb24-9" tabindex="-1"></a>           <span class="kw">The</span> <span class="kw">default</span> <span class="kw">is</span> <span class="kw">no</span> <span class="kw">minimum</span>.</span>
<span id="cb24-10"><a aria-hidden="true" href="#cb24-10" tabindex="-1"></a>    [<span class="kw">CYCLE</span> | <span class="kw">NOCYCLE</span>]</span>
<span id="cb24-11"><a aria-hidden="true" href="#cb24-11" tabindex="-1"></a>        <span class="op">-&gt;</span> Controls <span class="kw">the</span> behavior <span class="kw">on</span> reaching <span class="kw">MAXVALUE</span> <span class="kw">or</span> <span class="kw">MINVALUE</span>. <span class="kw">The</span> <span class="kw">default</span> behavior <span class="kw">is</span> <span class="kw">to</span> give an error</span>
<span id="cb24-12"><a aria-hidden="true" href="#cb24-12" tabindex="-1"></a>            <span class="cf">If</span> <span class="kw">CYCLE</span> <span class="kw">is</span> specified <span class="kw">the</span> <span class="kw">sequence</span> will <span class="kw">return</span> <span class="kw">to</span> its starting point <span class="kw">and</span> repeat.</span>
<span id="cb24-13"><a aria-hidden="true" href="#cb24-13" tabindex="-1"></a>    [<span class="kw">CACHE</span> <span class="dt">number</span> | <span class="kw">NOCACHE</span>]</span>
<span id="cb24-14"><a aria-hidden="true" href="#cb24-14" tabindex="-1"></a>        <span class="op">-&gt;</span> Oracle can preissue <span class="kw">sequence</span> <span class="kw">values</span> <span class="kw">in</span> batches <span class="kw">and</span> <span class="kw">cache</span> them <span class="cf">for</span> issuing <span class="kw">to</span> users.</span>
<span id="cb24-15"><a aria-hidden="true" href="#cb24-15" tabindex="-1"></a>           <span class="kw">The</span> <span class="kw">default</span> <span class="kw">is</span> <span class="kw">to</span> generate <span class="kw">and</span> <span class="kw">cache</span> <span class="kw">the</span> <span class="kw">next</span> <span class="dv">20</span> <span class="kw">values</span>.</span>
<span id="cb24-16"><a aria-hidden="true" href="#cb24-16" tabindex="-1"></a>    [<span class="kw">ORDER</span> | <span class="kw">NOORDER</span>] ;</span>
<span id="cb24-17"><a aria-hidden="true" href="#cb24-17" tabindex="-1"></a>        <span class="op">-&gt;</span> <span class="kw">Only</span> relevant <span class="cf">for</span> a clustered <span class="kw">database</span>:</span>
<span id="cb24-18"><a aria-hidden="true" href="#cb24-18" tabindex="-1"></a>           <span class="kw">ORDER</span> forces <span class="kw">all</span> <span class="kw">instances</span> <span class="kw">in</span> <span class="kw">the</span> <span class="kw">cluster</span> <span class="kw">to</span> coordinate incrementing <span class="kw">the</span> <span class="kw">sequence</span>,</span>
<span id="cb24-19"><a aria-hidden="true" href="#cb24-19" tabindex="-1"></a>           so that numbers issued are always <span class="kw">in</span> <span class="kw">order</span> even <span class="cf">when</span> issued <span class="kw">to</span> sessions against different <span class="kw">instances</span>.</span>
<span id="cb24-20"><a aria-hidden="true" href="#cb24-20" tabindex="-1"></a>           <span class="kw">NOORDER</span> <span class="kw">is</span> <span class="kw">the</span> <span class="kw">default</span></span></code></pre></div>
<ol start="26" type="1">
<li>If your application selects from the sequence 10 times a second,
then set the cache value to 50 thousand.</li>
<li>NEXTVAL -&gt; forces the sequence to increment,</li>
<li>CURRVAL -&gt; the last (or &ldquo;current&rdquo;) value issued to that session
with the CURRVAL pseudo column</li>
<li>The CURRVAL will be constant for one session until it selects
NEXTVAL again.</li>
<li>You can always obtain the next value by incrementing it with
NEXTVAL, and you can always recall the last value issued to YOUR session
with CURRVAL, but you CANNOT find the last value issued.</li>
<li>The CURRVAL of a sequence is the last value issued to the current
session, not necessarily the last value issued. .. You cannot select the
CURRVAL until after selecting the NEXTVAL.</li>
<li>A COMMIT is not necessary to make the increment of a sequence
permanent: .. It is permanent and made visible to the rest of the world
the moment it happens. .. Even if the insert or update is rolled back,
the sequence is NOT ROLLEDBACK</li>
<li>The gaps will be larger if the database has been restarted and the
CACHE clause was used. .. All numbers that have been generated and
cached but not yet issued will be lost when the database is shut down ..
At the next restart, the current value of the sequence will be the last
number generated, not the last issued.</li>
<li>Altering a sequence</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a aria-hidden="true" href="#cb25-1" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">SEQUENCE</span> sequencename</span>
<span id="cb25-2"><a aria-hidden="true" href="#cb25-2" tabindex="-1"></a>[<span class="kw">INCREMENT</span> <span class="kw">BY</span> <span class="dt">number</span>]</span>
<span id="cb25-3"><a aria-hidden="true" href="#cb25-3" tabindex="-1"></a>[<span class="kw">START</span> <span class="kw">WITH</span> <span class="dt">number</span>]</span>
<span id="cb25-4"><a aria-hidden="true" href="#cb25-4" tabindex="-1"></a>[<span class="kw">MAXVALUE</span> <span class="dt">number</span> | <span class="kw">NOMAXVALUE</span>]</span>
<span id="cb25-5"><a aria-hidden="true" href="#cb25-5" tabindex="-1"></a>[<span class="kw">MINVALUE</span> <span class="dt">number</span> | <span class="kw">NOMINVALUE</span>]</span>
<span id="cb25-6"><a aria-hidden="true" href="#cb25-6" tabindex="-1"></a>[<span class="kw">CYCLE</span> | <span class="kw">NOCYCLE</span>]</span>
<span id="cb25-7"><a aria-hidden="true" href="#cb25-7" tabindex="-1"></a>[<span class="kw">CACHE</span> <span class="dt">number</span> | <span class="kw">NOCACHE</span>]</span>
<span id="cb25-8"><a aria-hidden="true" href="#cb25-8" tabindex="-1"></a>[<span class="kw">ORDER</span> | <span class="kw">NOORDER</span>] ;</span></code></pre></div>
<ol start="35" type="1">
<li><p>ALTER command is the same as the CREATE command, with one
exception: there is no way to set the starting value. .. If you want to
restart the sequence, the only way is to drop it and re-create
it.</p></li>
<li><p>A unique constraint also requires an index. The difference from a
primary key constraint is that the column(s) of the unique constraint
can be left null, perhaps in many rows. .. This does not affect the
creation and use of the index: nulls do not go into the B*Tree
indexes</p></li>
<li><p>Foreign key constraints are enforced by indexes, but the index
must exist on the parent table</p></li>
<li><p>You should always create indexes on the foreign key columns
within the child table for performance reasons: a DELETE on the parent
table will be much faster if Oracle can use an index to determine
whether there are any rows in the child table referencing the row that
is being deleted</p></li>
<li><p>If there is no index on the column(s) referenced in the WHERE
clause, the only way to do this is with a full table scan.</p></li>
<li><p>A SELECT statement that includes the ORDER BY, GROUP BY, or UNION
keywords (and a few others) must sort the rows into order - unless there
is an index, which can return the rows in the correct order without
needing to sort them first.</p></li>
<li><p>Use of Indexes</p>
<p>-&gt; For Primary keys and Foreign keys -&gt; For Sorting during the
usage of ORDER BY or GROUP BY or UNION -&gt; When tables are
joined</p></li>
<li><p>Table Joins -&gt; depending on the size of the tables and the
memory resources available, it may be quicker to scan tables into memory
and join them there, rather than use indexes -&gt; decision by
Oracle</p></li>
<li><p>The nested loop join technique passes through one table using an
index on the other table to locate the matching rows: this is usually a
disk-intensive operation .. A hash join technique reads the entire table
into memory, converts it into a hash table, and uses a hashing algorithm
to locate matching rows; this is more memory and CPU intensive .. A sort
merge join sorts the tables on the join column then merges them
together: this is often a compromise between disk, memory, and CPU
resources</p></li>
<li><p>Types of indexes -&gt; B*Tree index, which is the default index
type, and the Bitmap Index</p></li>
<li><p>B*Tree indexes: these can be either unique or nonunique. -&gt;
Nonunique is the default. -&gt; &ldquo;B&rdquo; stands for &ldquo;balanced&rdquo; .. A unique
index will not permit insertion of two rows with the same key values; ..
a nonunique index will permit as many rows as you want with the same
values.</p></li>
<li><p>Indexes will improve performance for data retrieval but reduce
performance for DML operations.</p></li>
<li><p>B*tree Index .. The root node of the tree points to many nodes at
the second level, which can point to many nodes at the third level, and
so on .. The necessary depth of the tree will be largely determined by
the number of rows in the table and the length of the index key
values.</p></li>
<li><p>The B*Tree structure is very efficient. If the depth is greater
then three or four, than either the index keys are very long or the
table has billions of rows. .. If neither if these is the case, then the
index is in need of a rebuild.</p></li>
<li><p>The leaf nodes of the index tree store the rows&rsquo; keys, in order,
each with a pointer that identifies the physical location of the
row</p></li>
<li><p>The pointer to the row is the rowid -&gt; Oracle proprietary
pseudocolumn that every row in every table has .. Encrypted within it is
the physical address of the row.</p></li>
<li><p>ROWID: A row&rsquo;s rowid is globally unique. Every row in every table
in the whole database will have a different rowid. .. The rowid
encryption gives the physical address of the row: from it, Oracle can
calculate which operating system file and where in the file the row is,
and go straight to it.</p></li>
<li><p>B*Tree indexes are very efficient if the number of rows needed is
low in proportion to the total number of rows in the table and if the
table is large</p></li>
<li><p>Often said that if the query is going to retrieve more than 2 to
4 percent of the rows, then a full table scan will be quicker. .. A
major exception to this is if the value specified in the WHERE clause is
NULL. NULLs do not go into B<em>Tree indexes .. select </em> from
employees where last_name is null; -&gt; ALWAYS A FULL TABLE
SCAN</p></li>
<li><p>B*Tree index should not be used: .. On a column with few unique
values, as it will not be selective: .. The proportion of the table that
will be retrieved for each distinct key value will be too high</p></li>
<li><p>B*Tree indexes should be used if: .. The cardinality (the number
of distinct values) in the column is high, and .. The number of rows in
the table is high, and .. The column is used in WHERE clauses or JOIN
conditions</p></li>
<li><p>A Bitmap Index stores the rowids associated with each key value
as a bitmap .. WALKIN 11010111000101011101011101&hellip;.. .. DELIVERY
00101000111010100010100010&hellip;.. .. This means that the first row has the
column value of WALKIN, Second row as WALKIN, Third as DELIVERY .. So
every different value will be a bitmap, this includes NULLS as well
which will be a seperate bitmap</p></li>
<li><p><code>select count(*) from sales where channel='WALKIN' and shop='OXFORD';</code>
.. Oracle can retrieve the two relevant bitmaps and add them together
with a Boolean AND operation: .. The result of the AND operation shows
that only the seventh and sixteenth rows qualify for selection</p></li>
<li><p>A particular advantage that bitmap indexes have over B*Tree
indexes is that they include NULLs. As far as the bitmap index is
concerned, NULL is just another distinct value, which will have its own
bitmap.</p></li>
<li><p>Bitmap indexes should be used if: .. The cardinality (the number
of distinct values) in the column is low (such as male/female), and ..
The number of rows in the table is high, and .. The column is used in
Boolean algebra (AND/OR/NOT) operations</p></li>
<li><p><code>CREATE [UNIQUE | BITMAP] INDEX [ schema.]indexname ON [schema.]tablename (column [, column...] );</code>
.. The default type of index is a nonunique B*Tree index.</p></li>
<li><p>It is not possible to create a unique bitmap index</p></li>
<li><p>Indexes are schema objects, and it is possible to create an index
in one schema on a table in another</p></li>
<li><p>A composite index is an index on several columns .. Composite
indexes can be on columns of different data types, and the columns do
not have to be adjacent in the table.</p></li>
<li><p><code>create unique index dept_i1 on dept(deptno);</code> .. It
will not be possible to insert duplicate values</p></li>
<li><p><code>create index emp_i2 on emp(surname,forename);</code> ..
will accept duplicate values</p></li>
<li><p><code>create bitmap index emp_i3 on emp(deptno);</code> .. Bitmap
index</p></li>
<li><p>A unique and primary key constraint can be enforced by indexes
that are either unique or nonunique: .. In case of Pimary Key, it will
be a nonunique index that happens to have only unique values.</p></li>
<li><p>The Oracle server should make the best decision about index use,
but if it gets it wrong it is possible for a programmer to embed
instructions, known as OPTIMIZER HINTS, in code that will force the use
(or not) of certain indexes.</p></li>
<li><p>The ALTER INDEX command lies in the database administration
domain and would typically be used to adjust the physical properties of
the index, not the logical properties that are of interest to
developers</p></li>
<li><p>When a table is dropped, all the indexes and constraints defined
for the table are dropped as well. .. If an index was created implicitly
by creating a constraint, then dropping the constraint will also drop
the index. .. If the index had been created explicitly and the
constraint created later, then if the constraint is dropped the index
will survive.</p></li>
<li><p>Bitmap indexes cannot be unique. The keywords BITMAP and UNIQUE
are mutually exclusive .. A bitmap index can be composite, with columns
of different data types.</p></li>
<li><p>There is nothing known as a precompilation of Views. All the
views take the same time even with different types of joins</p></li>
<li><p><code>create view dept_v as select * from dept;</code></p></li>
<li><p><code>create synonym dept_s for dept_v;</code></p></li>
<li><p>Table -&gt; View -&gt; synonym .. If table is dropped and when
querying the synonym or the view, recompilation of view happens and
error is thrown</p></li>
<li><p>We can never know what would the nextval of a sequence is as
multiple sessions can be using it</p></li>
<li><p>A UNIQUE constraint on a column requires an index. -&gt; If a
UNIQUE or NONUNIQUE index already exists on the column, it will be
used.</p></li>
</ol>
    </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
    <ul class="col-sm-6 list-inline">
        <li class="list-inline-item"><a href="https://sengopal.github.io/#">Resume</a></li>
        <li class="list-inline-item"><a href="https://sengopal.github.io/archives">Archives</a></li>
        <li class="list-inline-item"><a href="https://sengopal.github.io/categories">Categories</a></li>
        <li class="list-inline-item"><a href="https://sengopal.github.io/tags">Tags</a></li>
    </ul>
    <p class="col-sm-6 text-sm-right text-muted">
        Opinions my own. Made with &#x2764; using <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>        
    </p>
</div>    </div>
  </footer>

</body>

</html>