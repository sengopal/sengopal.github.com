<!DOCTYPE html>
<html>
<head>
    <title>Collection of useful java code snippets</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Collection of useful java code snippets"/>
    <meta property="og:url" content="./collection-of-useful-java-code-snippets.html"/>
    <meta property="og:description" content="Growing list of useful and interesting java code snippets"/>

    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="./theme/css/syntax.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/poole.css" type="text/css"/>

    <link href="./atom.xml" type="application/atom+xml" rel="alternate"
    title="Senthil Gopal ATOM Feed"/>


</head>
<body>

  <div class="masthead">
    <h3 class="masthead-title container">
      <a href="/" title="Home">Senthil Gopal</a>
          &nbsp;&nbsp;&nbsp;<small><a href="pages/about.html">About</a></small>          
          &nbsp;&nbsp;&nbsp;<small><a href="archives.html">Archive</a></small>
    </h3>

    <ul>
        <li><a href="/atom.xml" target="_blank"><i class="icon icon-rss img-links"></i></a></li>
        <li><a href="https://github.com/sengopal/" target="_blank"><i class="icon-github img-links"></i></a></li>
        <li><a href="http://www.linkedin.com/in/senthilgopal" target="_blank"><i class="icon-linkedin img-links"></i></a></li>
        <li><a href="https://twitter.com/sengopal" target="_blank"><i class="icon-twitter img-links"></i></a></li>
    </ul>

  </div>    


    <div class="container content">

        <div class="page">
    <section id="content">
        <article class="post">
            <header>
                <h1 class="post-title">
                    <a href="./collection-of-useful-java-code-snippets.html"
                       rel="bookmark"
                       title="Permalink to Collection of useful java code snippets">
                        Collection of useful java code snippets
                    </a>
                </h1>
                <p class="time post-date">Published on 06 Jul 2011</p>
            </header>

            <div class="entry-content">
                <h3>For Sending a POST request</h3>
<p><strong>Code snippet for making a HTTP call</strong></p>
<div class="highlight"><pre>    <span class="o">:::</span><span class="n">java</span>
    <span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">IOException</span><span class="p">;</span>
    <span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">OutputStreamWriter</span><span class="p">;</span>
    <span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">net</span><span class="p">.</span><span class="n">HttpURLConnection</span><span class="p">;</span>
    <span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">net</span><span class="p">.</span><span class="n">URL</span><span class="p">;</span>
    <span class="n">public</span> <span class="n">class</span> <span class="n">Test</span> <span class="p">{</span>
        <span class="n">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="n">throws</span> <span class="n">IOException</span> <span class="p">{</span>
            <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">new</span> <span class="n">URL</span><span class="p">(</span><span class="s">&quot;&lt;a href=&quot;</span><span class="n">http</span><span class="o">:</span><span class="c1">//localhost:8080/resttest/services/Order/3&quot;);</span>
            <span class="n">HttpURLConnection</span> <span class="n">httpCon</span> <span class="o">=</span> <span class="p">(</span><span class="n">HttpURLConnection</span><span class="p">)</span> <span class="n">url</span><span class="p">.</span><span class="n">openConnection</span><span class="p">();</span>
            <span class="n">httpCon</span><span class="p">.</span><span class="n">setDoOutput</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
            <span class="n">httpCon</span><span class="p">.</span><span class="n">setRequestMethod</span><span class="p">(</span><span class="s">&quot;POST&quot;</span><span class="p">);</span>
            <span class="n">OutputStreamWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">new</span> <span class="n">OutputStreamWriter</span><span class="p">(</span><span class="n">httpCon</span><span class="p">.</span><span class="n">getOutputStream</span><span class="p">());</span>
            <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">httpCon</span><span class="p">.</span><span class="n">getResponseCode</span><span class="p">());</span>
            <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">httpCon</span><span class="p">.</span><span class="n">getResponseMessage</span><span class="p">());</span>
            <span class="n">out</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>


<p><strong>Static Block and main()</strong></p>
<p>Before calling main, the static block for the class is called to initialize the class.</p>
<div class="highlight"><pre>    <span class="o">:::</span><span class="n">java</span>
    <span class="n">public</span> <span class="n">class</span> <span class="n">Main</span> <span class="p">{</span>
        <span class="k">static</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Called first.&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hello world.&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>


<p><em>Output:</em></p>
<p><code>Called first.
Hello world.</code></p>
<p><strong>Code without main()</strong></p>
<p>Normally, if you don't have a main() method, you will get an error. However if your program exits before calling main() no error is produced.</p>
<div class="highlight"><pre>    <span class="o">:::</span><span class="n">java</span>
    <span class="n">public</span> <span class="n">class</span> <span class="n">Main</span> <span class="p">{</span>
        <span class="k">static</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hello world.&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>


<p><em>Output:</em></p>
<p><code>Hello world.</code></p>
<p><strong>premain</strong></p>
<p>If you have Java agents, those agents can have a premain method which is called first. <a href="http://download.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html">Instrument package</a></p>
<div class="highlight"><pre><span class="n">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">premain</span><span class="p">(</span><span class="n">String</span> <span class="n">agentArgs</span><span class="p">,</span> <span class="n">Instrumentation</span> <span class="n">inst</span><span class="p">);</span>
</pre></div>


<p>The Instrumentation class gives the agent access to each class' byte code after it is read and before it is linked, giving the agent the option to change byte code. One interesting feature of the Instrumentation class is the getObjectSize() which will give you the size of an object.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
    </div>
    
    <hr/>

    <footer class="clearfix">
        <div class="container">
             <p>Â© 2014 Senthil Gopal. The opinions expressed here are my own and do not necessarily reflect the opinions of my employer.</p>
             <p>This is a static site generated using <a href="https://github.com/getpelican/pelican">pelican</a> and the source code for this site is publicly available at <a href="https://github.com/sengopal/sengopal.github.com">github</a>
             </p>
        </div>
    </footer>

    <!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
    <script src="./theme/js/respond.min.js"></script>
</body>
</html>